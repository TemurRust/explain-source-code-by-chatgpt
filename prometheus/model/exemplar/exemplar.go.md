# File: tsdb/exemplar.go

在Prometheus项目中，tsdb/exemplar.go文件的作用是实现指标样本（exemplar）的存储和查询功能。

CircularExemplarStorage结构体用于表示指标样本的循环存储容器。它使用环形缓冲区来保存指标样本，并通过索引维护样本的位置。indexEntry结构体用于表示循环存储容器的索引项，其中包含每个指标样本的标签和在环形缓冲区中的偏移量。circularBufferEntry结构体表示环形缓冲区中的每个条目，包含时间戳和值。ExemplarMetrics结构体用于统计指标样本的数量和容器的信息。

NewExemplarMetrics函数用于创建ExemplarMetrics结构体实例。NewCircularExemplarStorage函数用于创建CircularExemplarStorage结构体实例。ApplyConfig函数用于应用配置文件对ExemplarMetrics和CircularExemplarStorage进行相应的设置。Appender函数用于向循环存储容器中添加指标样本。ExemplarQuerier和Querier函数用于查询指标样本。Select函数用于选择符合要求的指标样本。matchesSomeMatcherSet函数用于判断指标样本是否满足一组匹配规则。ValidateExemplar和validateExemplar函数用于验证指标样本是否合法。Resize函数用于调整循环存储容器的大小。migrate函数用于在容量调整时迁移指标样本。AddExemplar函数用于添加指标样本到循环存储容器。computeMetrics函数用于计算指标样本的数量和容器的信息。IterateExemplars函数用于遍历指标样本。

总而言之，tsdb/exemplar.go文件中的结构体和函数实现了Prometheus中对指标样本的存储和查询功能，包括循环存储容器、索引项、环形缓冲区、配置应用、指标样本添加、指标样本查询等。

