# File: tools/internal/memoize/memoize.go

`tools/internal/memoize/memoize.go` 文件是 Golang 的 Tools 项目中的一个内部包，它提供了一个基于内存缓存的库，用于实现应用程序中经常使用的函数的结果的 memoization（结果缓存）。

以下是这些结构体和函数的作用说明：

1. `Function` 结构体：定义了要进行 memoization 的函数的签名和行为。它包含一个 `Call` 方法，用于执行函数并返回结果。
2. `RefCounted` 结构体：一个简单的引用计数器，用于跟踪某个元素在缓存中的引用。
3. `Promise` 结构体：表示对函数结果的一个 promise（承诺），它包含一个 `Get` 方法，用于获取 promise 的值。
4. `state` 结构体：表示对函数执行中间状态的记录。
5. `EvictionPolicy` 接口：定义了缓存中元素的淘汰策略的接口。
6. `Store` 结构体：实现了一个基于内存的缓存，并提供了不同的策略来管理缓存。
7. `NewPromise` 函数：用于创建一个 promise，将函数的执行结果封装为一个 promise 对象。
8. `Cached` 函数：用于从缓存中获取函数的结果，如果缓存中不存在，则执行函数并将结果放入缓存。
9. `Get` 函数：用于获取给定 Key 对应的元素，如果元素不存在或已过期，则返回 `nil`。
10. `run` 函数：执行给定的函数，并将结果存储在缓存中。
11. `wait` 函数：等待函数执行完成，并返回结果。
12. `NewStore` 函数：创建一个新的缓存存储。
13. `Promise` 函数：创建一个返回函数结果的 promise 对象。
14. `Stats` 函数：返回缓存的统计信息，例如命中率、缓存大小等。
15. `DebugOnlyIterate` 函数：以调试模式遍历缓存。

通过使用这些结构体和函数，开发人员可以轻松地将经常使用的函数结果进行缓存，以提高应用程序的性能和响应速度。

