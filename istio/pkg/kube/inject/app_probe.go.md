# File: istio/pkg/kube/inject/app_probe.go

在Istio项目中，istio/pkg/kube/inject/app_probe.go文件的作用是将Kubernetes的探针（Probe）转换为Istio的探针，以便在Istio的注入过程中重新构建探针对象。

KubeAppProbers结构体是一个包含了应用程序的探针的集合，Prober结构体则是每个应用程序探针的具体定义。KubeAppProbers用于存储应用程序的所有探针，而Prober则表示一个具体的探针对象，包含了探测方法和配置。

ShouldRewriteAppHTTPProbers函数用于判断是否需要重写应用程序的HTTP探针。

FindSidecar函数根据Pod对象中的标签查找sidecar容器。

FindContainerFromPod函数根据容器名称在Pod对象中查找对应的容器。

FindContainer函数根据容器名称在PodSpec中查找对应的容器。

convertAppProber函数用于将Kubernetes的探针对象转换为Istio的探针对象。

convertAppProberHTTPGet函数用于将Kubernetes的HTTPGet探针转换为Istio的HTTPGet探针。

convertAppProberTCPSocket函数用于将Kubernetes的TCPSocket探针转换为Istio的TCPSocket探针。

convertAppProberGRPC函数用于将Kubernetes的GRPC探针转换为Istio的GRPC探针。

DumpAppProbers函数用于将应用程序的探针对象转换为字符串形式进行输出。

allContainers函数用于获取PodSpec中的所有容器。

patchRewriteProbe函数用于重写应用程序的探针。

convertProbe函数用于将Kubernetes的探针对象转换为Istio的探针对象。

kubeProbeToInternalProber函数用于将Kubernetes的探针对象转换为Istio的内部探针对象。

这些函数和结构体一起工作，通过转换和重写探针，实现了在Istio的注入过程中重新构建应用程序的探针对象。它们是istio/pkg/kube/inject/app_probe.go文件的核心组成部分，用于确保Istio可以正确处理应用程序的探针。

